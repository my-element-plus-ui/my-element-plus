import{y as Y,q as Z,h as ee,d as B,_ as le,U as j,g as ae,T as H,p as h,s as oe}from"../app.01939e13.js";import{d as te,a7 as re,w as ie,D as k,o as i,c as u,z as C,G as f,F as p,L as M,A as b,B as y,a as S,t as z,C as g,E as U,n as P,M as de,N as ne}from"./framework.bfd8e565.js";import"./theme.6da799b4.js";const me=c=>(de("data-v-156c3116"),c=c(),ne(),c),ue={class:"filter-tip"},ce=me(()=>C("span",null,"筛选条件：",-1)),se=S("全选"),fe={class:"color-content"},pe=["onClick"],ge={class:"dialog-footer"},he=S("重置"),be=S("确定"),ye=te({name:"FilterDia",props:{modelValue:Boolean,model:Object,currentFilterItem:Object,staticData:Object,tableList:{type:Array,default:()=>[]},filterList:{type:Array,default:()=>[]}},emits:["update:modelValue","onSubmit","close"],setup(c,{expose:$,emit:V}){const t=c,m=re({dialogVisible:!1,list:Y(t.filterList)});ie(()=>t.modelValue,a=>{var o,r,d,n,s;a&&(~m.list.map(v=>v.key).indexOf((o=t.currentFilterItem)==null?void 0:o.key)||m.list.push({form:{enumsValue:((r=t.model)==null?void 0:r.type)!="digitalRangeColor"?((n=t.staticData[(d=t.model)==null?void 0:d.staticType])==null?void 0:n.map(v=>v.value))||[]:[]},...t.model,key:(s=t.currentFilterItem)==null?void 0:s.key}))},{immediate:!0});const q=(a,o)=>{a.checkbox=o?a.enumsValue:[],a.isIndeterminate=!1},x=(a,o)=>{const r=o.length;a.isIndeterminate=r>0&&r<a.enumsValue.length,a.checkAll=r===a.enumsValue.length},F=(a,o,r="")=>{var d;const{list:n}=o;a.form.basicSelectKey==((d=t.currentFilterItem)==null?void 0:d.key)||r==="searchSelect"?(a.form.selected=n,a.form[a.type]=n.map(s=>s[a.selectKey]).join(","),a.form[a.showLabel]=n.map(s=>s[a.showLabel]).join(",")):(a.form.outSelected=n,a.form.ruleModel=n.map(s=>s[a.ruleOutSelectKey]).join(","))},I=(a,o)=>{a.form.basicSelectKey=o,m.dialogVisible=!0},R=a=>{a.form.selected="",a.form.basicSelect="",a.form.ruleModel="",a.form.outSelected=""},E=()=>{var a;(a=t.model)!=null&&a.callback&&t.model.callback(m.list),D(),V("onSubmit",m.list)},D=(a=!1)=>{const o=m.list.filter(d=>{var n;return d.key==((n=t.currentFilterItem)==null?void 0:n.key)})[0]||null;if(!o)return;const{hoverMore:r}=t.currentFilterItem;switch(t.model.type){case"radio":a&&(o.form.radio=""),r.isFilter.filtering=!h(o.form.radio);break;case"checkbox":a&&(o.form.checkbox=[],x(o.form,[])),r.isFilter.filtering=!h(o.form.checkbox);break;case"searchNumber":a&&(o.form.searchNumber="",o.form.ruleModel=""),r.isFilter.filtering=!(h(o.form.searchNumber)&&h(o.form.ruleModel));break;case"basicSelect":case"searchSelect":a&&(o.form[t.model.type]="",t.model.showLabel&&(o.form[t.model.showLabel]=""),o.form.ruleModel="",o.form.selected=[],o.form.outSelected=[],r.isFilter.filtering=!1),r.isFilter.filtering=!(h(o.form[t.model.type])&&h(o.form.ruleModel));break;case"input":a&&(o.form.input=""),r.isFilter.filtering=!h(o.form.input);break;case"digitalRangeColor":a&&(o.form.digitalRangeCheck=null);case"digitalRange":a&&(o.form[t.model.type]=[]),r.isFilter.filtering=Array.isArray(o.form[t.model.type])&&o.form[t.model.type].length>0&&o.form[t.model.type].some(d=>d||d===0);break;case"dateSelect":a&&(o.form.dateSelect=[]),r.isFilter.filtering=Array.isArray(o.form.dateSelect)&&o.form.dateSelect.length>0&&o.form.dateSelect.slice(0,2).some(d=>d);break}},G=()=>{D(!0),V("onSubmit",m.list)},J=(a,o,r)=>{a.form.digitalRangeColor=[o.min,o.max],a.form.digitalRangeCheck=r},Q=(a,o)=>{let r=o.findIndex(d=>{var n;return((n=a.form.digitalRangeColor)==null?void 0:n.length)==2&&d.min===a.form.digitalRangeColor[0]&&d.max===a.form.digitalRangeColor[1]});a.form.digitalRangeCheck=r>-1?r:null};return $({resetAll:()=>{t.tableList.map(a=>{var o;(o=a==null?void 0:a.hoverMore)!=null&&o.isFilter&&(a.hoverMore.isFilter.filtering=!1)}),m.list=[],V("onSubmit",m.list),V("update:modelValue",!1)}}),(a,o)=>{const r=k("svg-icon"),d=k("el-radio"),n=k("el-radio-group"),s=k("el-checkbox"),v=k("el-checkbox-group"),W=k("el-input");return i(),u(p,null,[C("div",ue,[ce,f(r,{iconName:"icon-guanbi",onClick:o[0]||(o[0]=e=>V("close"))})]),(i(!0),u(p,null,M(m.list,(e,X)=>{var w,L,O,N,A,K,_;return i(),u("div",{class:"filter-content",key:X},[e.key==((w=t.currentFilterItem)==null?void 0:w.key)?(i(),u(p,{key:0},[(e==null?void 0:e.type)=="radio"?(i(),b(n,{key:0,modelValue:e.form.radio,"onUpdate:modelValue":l=>e.form.radio=l},{default:y(()=>[(i(!0),u(p,null,M(c.staticData[e==null?void 0:e.staticType],l=>(i(),b(d,{label:l.value,key:l.value},{default:y(()=>[S(z(l.name),1)]),_:2},1032,["label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):g("",!0),(e==null?void 0:e.type)=="checkbox"?(i(),u(p,{key:1},[f(s,{modelValue:e.form.checkAll,"onUpdate:modelValue":l=>e.form.checkAll=l,indeterminate:e.form.isIndeterminate,onChange:l=>q(e.form,l)},{default:y(()=>[se]),_:2},1032,["modelValue","onUpdate:modelValue","indeterminate","onChange"]),f(v,{modelValue:e.form.checkbox,"onUpdate:modelValue":l=>e.form.checkbox=l,onChange:l=>x(e.form,l)},{default:y(()=>[(i(!0),u(p,null,M(c.staticData[e==null?void 0:e.staticType],l=>(i(),b(s,{key:l.value,label:l.value},{default:y(()=>[S(z(l.name),1)]),_:2},1032,["label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])],64)):g("",!0),(e==null?void 0:e.type)=="searchNumber"?(i(),b(Z,U({key:2,modelValue:e.form.searchNumber,"onUpdate:modelValue":l=>e.form.searchNumber=l,onClear:l=>(e.form.searchNumber="",e.form.ruleModel=""),ruleModel:e.form.ruleModel,"onUpdate:ruleModel":l=>e.form.ruleModel=l},{modelProps:{ruleOutKey:e.ruleOutKey}}),null,16,["modelValue","onUpdate:modelValue","onClear","ruleModel","onUpdate:ruleModel"])):g("",!0),(e==null?void 0:e.type)=="basicSelect"?(i(),u(p,{key:3},[f(ee,{modelValue:e.form[e.showLabel||"basicSelect"],"onUpdate:modelValue":l=>e.form[e.showLabel||"basicSelect"]=l,ruleModel:e.form.ruleModel,ruleKey:e.form.ruleKey,initItem:c.currentFilterItem,onOnDialogShow:l=>I(e,l),onOnSearchClear:l=>R(e)},null,8,["modelValue","onUpdate:modelValue","ruleModel","ruleKey","initItem","onOnDialogShow","onOnSearchClear"]),f(B,U({modelValue:m.dialogVisible,"onUpdate:modelValue":o[1]||(o[1]=l=>m.dialogVisible=l),onCustHandle:l=>F(e,l)},{...(L=t==null?void 0:t.model)==null?void 0:L.searchData}),null,16,["modelValue","onCustHandle"])],64)):g("",!0),(e==null?void 0:e.type)=="searchSelect"?(i(),u(p,{key:4},[f(le,U({modelValue:e.form[e.showLabel||"searchSelect"],"onUpdate:modelValue":l=>e.form[e.showLabel||"searchSelect"]=l,onOnDialogShow:l=>I(e,l),onOnSearchClear:l=>R(e),initItem:e},{...e},{checkTable:(O=e.form)==null?void 0:O.selected,ruleModel:e.form.ruleModel,onCustDialog:l=>F(e,l,"searchSelect"),onChange:l=>{a.onChangeFlag||(e.changeCallBack?e.changeCallBack(l):e.selectChange&&e.selectChange(l))}}),null,16,["modelValue","onUpdate:modelValue","onOnDialogShow","onOnSearchClear","initItem","checkTable","ruleModel","onCustDialog","onChange"]),f(B,U({modelValue:m.dialogVisible,"onUpdate:modelValue":o[2]||(o[2]=l=>m.dialogVisible=l),onCustHandle:l=>F(e,l)},{title:e.title,isRadio:!e.initMultiple,dataContent:e.defaultParams,...e,...(N=t==null?void 0:t.model)==null?void 0:N.searchData,checkTable:e.form.basicSelectKey==((A=c.currentFilterItem)==null?void 0:A.key)?(K=e.form)==null?void 0:K.selected:(_=e.form)==null?void 0:_.outSelected}),null,16,["modelValue","onCustHandle"])],64)):g("",!0),(e==null?void 0:e.type)=="input"?(i(),b(W,{key:5,modelValue:e.form.input,"onUpdate:modelValue":l=>e.form.input=l,modelModifiers:{trim:!0},disabled:e.disabled,placeholder:e.placeholder||"请输入",maxlength:e.maxLen||32},null,8,["modelValue","onUpdate:modelValue","disabled","placeholder","maxlength"])):g("",!0),(e==null?void 0:e.type)=="digitalRange"?(i(),b(j,{key:6,disabled:e.disabled,modelValue:e.form.digitalRange,"onUpdate:modelValue":l=>e.form.digitalRange=l},null,8,["disabled","modelValue","onUpdate:modelValue"])):g("",!0),(e==null?void 0:e.type)=="digitalRangeColor"?(i(),u(p,{key:7},[C("div",fe,[(i(!0),u(p,null,M(c.staticData[e==null?void 0:e.staticType],(l,T)=>(i(),u("span",{key:l.type,class:P(`digital-range ${T==e.form.digitalRangeCheck&&"check"}`),onClick:ke=>J(e,l,T)},[C("span",{class:P(`self-icon digital-range-icon ${l.type}`)},null,2)],10,pe))),128))]),f(j,{disabled:e.disabled,modelValue:e.form.digitalRangeColor,"onUpdate:modelValue":l=>e.form.digitalRangeColor=l,onChange:l=>Q(e,c.staticData[e==null?void 0:e.staticType])},null,8,["disabled","modelValue","onUpdate:modelValue","onChange"])],64)):g("",!0),(e==null?void 0:e.type)=="dateSelect"?(i(),b(ae,{key:8,modelValue:e.form.dateSelect,"onUpdate:modelValue":l=>e.form.dateSelect=l,disabled:e.disabled},null,8,["modelValue","onUpdate:modelValue","disabled"])):g("",!0)],64)):g("",!0)])}),128)),C("div",ge,[f(H,{onClick:G},{default:y(()=>[he]),_:1}),f(H,{type:"primary",class:"mrgl-10",onClick:E},{default:y(()=>[be]),_:1})])],64)}}}),Se=oe(ye,[["__scopeId","data-v-156c3116"]]);export{Se as default};
